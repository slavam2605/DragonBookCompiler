fun calculate_div_p2(int n) -> int {
    int a = n / 1 + n / 2 + n / 4 + n / 8 + n / 1024 + n / 131072 + n / 1048576;
    int b = n % 1 + n % 2 + n % 4 + n % 8 + n % 1024 + n % 131072 + n % 1048576;
    int c = n / -1 + n / -2 + n / -4 + n / -8 + n / -1024 + n / -131072 + n / -1048576 + n / -9223372036854775808;
    int d = n % -1 + n % -2 + n % -4 + n % -8 + n % -1024 + n % -131072 + n % -1048576 + n % -9223372036854775808;
    return a + b + 3 * (c + d) / 7;
}

fun calculate_div(int n) -> int {
    int a = n / 3 + n / 5 + n / 7 + n / 11 + n / 13 + n / 97 + n / 1009 + n / 128712 + n / 2147483647 + n / 8589935681 + n / 489133282872437279;
    int b = n % 3 + n % 5 + n % 7 + n % 11 + n % 13 + n % 97 + n % 1009 + n % 128712 + n % 2147483647 + n % 8589935681 + n % 489133282872437279;
    int c = n / -3 + n / -5 + n / -7 + n / -11 + n / -13 + n / -97 + n / -1009 + n / -128712 + n / -2147483647 + n / -8589935681 + n / -489133282872437279;
    int d = n % -3 + n % -5 + n % -7 + n % -11 + n % -13 + n % -97 + n % -1009 + n % -128712 + n % -2147483647 + n % -8589935681 + n % -489133282872437279;
    return a + b + 2 * (c + d) / 5;
}

fun performance_target(int n) -> int {
    int result = 0;
    for (int i = 0; i < n; i += 1) {
        result += calculate_div_p2(i * i) + calculate_div(i * i + 1) * 1081052807777227316;
    }
    return result;
}

fun test_main() {
    assertEquals(calculate_div_p2(0), 0);
    assertEquals(calculate_div_p2(1), 9);
    assertEquals(calculate_div_p2(-1), -9);
    assertEquals(calculate_div_p2(2), 16);
    assertEquals(calculate_div_p2(-2), -16);
    assertEquals(calculate_div_p2(3), 26);
    assertEquals(calculate_div_p2(-3), -26);
    assertEquals(calculate_div_p2(4), 28);
    assertEquals(calculate_div_p2(-4), -28);
    assertEquals(calculate_div_p2(5), 38);
    assertEquals(calculate_div_p2(-5), -38);
    assertEquals(calculate_div_p2(2187), 9737);
    assertEquals(calculate_div_p2(-2187), -9737);
    assertEquals(calculate_div_p2(37872387), 57184299);
    assertEquals(calculate_div_p2(-37872387), -57184299);
    assertEquals(calculate_div_p2(271381379094), 407225630210);
    assertEquals(calculate_div_p2(-271381379094), -407225630210);
    assertEquals(calculate_div_p2(27138137909432877), 40722484016901297);
    assertEquals(calculate_div_p2(-27138137909432877), -40722484016901297);
    assertEquals(calculate_div_p2(9223372036854775807), -1971244656986084783);
    assertEquals(calculate_div_p2(-9223372036854775808), 653620080294232065);

    assertEquals(calculate_div(0), 0);
    assertEquals(calculate_div(1), 15);
    assertEquals(calculate_div(-1), -15);
    assertEquals(calculate_div(2), 30);
    assertEquals(calculate_div(-2), -30);
    assertEquals(calculate_div(3), 42);
    assertEquals(calculate_div(-3), -42);
    assertEquals(calculate_div(4), 58);
    assertEquals(calculate_div(-4), -58);
    assertEquals(calculate_div(5), 67);
    assertEquals(calculate_div(-5), -67);
    assertEquals(calculate_div(2187), 13702);
    assertEquals(calculate_div(-2187), -13702);
    assertEquals(calculate_div(37872387), 178544520);
    assertEquals(calculate_div(-37872387), -178544520);
    assertEquals(calculate_div(271381379094), 527455125971);
    assertEquals(calculate_div(-271381379094), -527455125971);
    assertEquals(calculate_div(27138137909432877), 51920652385151601);
    assertEquals(calculate_div(-27138137909432877), -51920652385151601);
    assertEquals(calculate_div(9223372036854775807), 9009331306168050958);
    assertEquals(calculate_div(-9223372036854775808), -9009331306168050974);
}

// external_calls: 42